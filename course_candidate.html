<section class="p-6">
  <h2 class="text-3xl font-bold mb-6">Candidate Sessions</h2>
  <div id="sessions-container" class="space-y-4"></div>
</section>

<script>
const sheetUrl = 'https://docs.google.com/spreadsheets/d/e/<sheet-id>/pub?output=csv'; // replace <sheet-id>

fetch(sheetUrl)
  .then(res => res.text())
  .then(csvText => {
    const container = document.getElementById('sessions-container');
    const rows = csvText.split('\n').slice(1); // skip header

    rows.forEach(row => {
      if (!row.trim()) return; // skip empty lines
      const [session, releaseDateStr] = row.split(',');
      const releaseDate = new Date(releaseDateStr.trim());
      const now = new Date();

      const div = document.createElement('div');
      div.className = 'p-4 bg-white rounded shadow';

      const h3 = document.createElement('h3');
      h3.textContent = session.trim();
      h3.className = 'text-xl font-semibold mb-2';
      div.appendChild(h3);

      const p = document.createElement('p');
      if (now >= releaseDate) {
        const a = document.createElement('a');
        a.href = `${session.trim().toLowerCase().replace(' ', '_')}.html`; // assumes candidate session page naming
        a.textContent = "Access Session";
        a.className = "text-blue-500 hover:underline";
        p.appendChild(a);
      } else {
        p.textContent = `Available on ${releaseDate.toDateString()}`;
        p.className = 'text-gray-500 italic';
      }
      div.appendChild(p);

      container.appendChild(div);
    });
  });
</script>
