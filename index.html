<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mid Yorkshire Anaesthetics and Critical Care Teaching Programme</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen p-4">
  <div class="max-w-4xl mx-auto space-y-6">

    <h1 id="headline" class="text-3xl sm:text-4xl md:text-5xl font-bold text-center text-indigo-600 cursor-pointer">
      Mid Yorkshire Anaesthetics & Critical Care Teaching
    </h1>

    <div id="schedule" class="bg-white shadow rounded-lg p-6">
      <!-- Schedule will be injected here -->
    </div>

    <div id="emailSection" class="bg-white shadow rounded-lg p-6 hidden">
      <h2 class="text-xl font-semibold mb-2">Email Preview</h2>
      <textarea id="emailContent" class="w-full h-60 p-3 border rounded text-sm font-mono"></textarea>
    </div>
  </div>

  <script>
    const schedule = {
      Monday: { topic: "Airway Management", teacher: "Dr Smith", link: "https://teams.microsoft.com/monday" },
      Tuesday: { topic: "Sepsis Protocols", teacher: "Dr Jones", link: "https://teams.microsoft.com/tuesday" },
      Wednesday: { topic: "Trauma Simulation", teacher: "Dr Brown", link: "https://teams.microsoft.com/wednesday" },
      Thursday: { topic: "TIVA Workshop", teacher: "Dr Patel", link: "https://teams.microsoft.com/thursday" },
      Friday: { topic: "Neuro ICU", teacher: "Dr Lee", link: "https://teams.microsoft.com/friday" }
    };

    const scheduleDiv = document.getElementById("schedule");
    const emailSection = document.getElementById("emailSection");
    const emailContent = document.getElementById("emailContent");

    // Show next week's schedule (relative to today)
    function generateNextWeeksSchedule() {
      scheduleDiv.innerHTML = "";
      const heading = document.createElement("h2");
      heading.className = "text-2xl font-semibold mb-4";
      heading.innerText = "Next Week's Teaching Schedule";
      scheduleDiv.appendChild(heading);

      const list = document.createElement("ul");
      list.className = "space-y-4";

      for (const [day, { topic, teacher, link }] of Object.entries(schedule)) {
        const item = document.createElement("li");
        item.innerHTML = `
          <div class="bg-indigo-50 p-4 rounded-lg shadow">
            <h3 class="text-lg font-bold">${day}</h3>
            <p><strong>Topic:</strong> ${topic}</p>
            <p><strong>Teacher:</strong> ${teacher}</p>
            <p><strong>Link:</strong> <a href="${link}" class="text-blue-600 underline break-all">${link}</a></p>
          </div>
        `;
        list.appendChild(item);
      }

      scheduleDiv.appendChild(list);
    }

    function generateEmail() {
      let email = `Hi everyone,\n\n`;
      email += `I hope you have had a great weekend. The schedule for this week's teaching is as follows:\n\n`;

      for (const [day, { topic, teacher, link }] of Object.entries(schedule)) {
        email += `${day}:\n`;
        email += `Topic: ${topic}\n`;
        email += `Teacher: ${teacher}\n`;
        email += `Link: ${link}\n\n`;
      }

      email += `Please continue to sign up to help teach on the programme: https://docs.google.com/spreadsheets/d/... \n\n`;
      email += `All the best,\n\n`;
      email += `Adam Neep\n`;
      email += `%cDr Adam Neep\nConsultant in ICM and Anaesthesia\nGMC: 7135243`;

      emailContent.value = email;
      emailSection.classList.remove("hidden");
    }

    // Trigger email generation by double-clicking the headline and entering a password
    document.getElementById("headline").addEventListener("dblclick", () => {
      const password = prompt("Enter password to generate email:");
      if (password === "your_password_here") {
        generateNextWeeksSchedule();
        generateEmail();
      } else {
        alert("Incorrect password.");
      }
    });

    // Generate the next week's schedule by default on page load
    generateNextWeeksSchedule();
  </script>
</body>
</html>
